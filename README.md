# cargo-doc-viewer

[![Rust](https://img.shields.io/badge/rust-stable-brightgreen.svg)](https://www.rust-lang.org/)
[![License](https://img.shields.io/badge/license-MIT%2FApache--2.0-blue.svg)](LICENSE)

ä¸€ä¸ªå¢å¼º Rust æ–‡æ¡£æµè§ˆä½“éªŒçš„å·¥å…·ï¼Œä¸º `cargo doc` ç”Ÿæˆçš„ HTML æ–‡ä»¶æ³¨å…¥äº¤äº’å¼ç•Œé¢ç»„ä»¶ã€‚

A tool that enhances Rust documentation browsing experience by injecting interactive UI components into HTML files generated by `cargo doc`.

## âœ¨ ç‰¹æ€§ Features

### ğŸ” å¢å¼ºæœç´¢ Enhanced Search
- **å›ºå®šé¡¶éƒ¨æœç´¢æ ** - ä¿æŒæœç´¢åŠŸèƒ½å§‹ç»ˆå¯è§
- **æœç´¢ç»“æœç­›é€‰** - æŒ‰ç±»å‹ç­›é€‰æœç´¢ç»“æœï¼ˆæ–¹æ³•/å‡½æ•°/ç»“æ„ä½“/æšä¸¾/Trait/å®/å¸¸é‡/ç±»å‹/æ¨¡å—ï¼‰
- **æœç´¢å†å²** - è‡ªåŠ¨ä¿å­˜å’Œæ¢å¤æœç´¢å†å²

### ğŸ§­ æ™ºèƒ½å¯¼èˆª Smart Navigation
- **Home å¯¼èˆªä¸‹æ‹‰èœå•** - å¿«é€Ÿè¿”å›å½“å‰åŒ…é¦–é¡µæˆ–æŸ¥çœ‹æ‰€æœ‰åŒ…æ¦‚è§ˆ
- **å‡½æ•°ä¸‹æ‹‰é€‰æ‹©å™¨** - åœ¨é¡¶éƒ¨å¿«é€Ÿé€‰æ‹©å½“å‰é¡µé¢çš„å‡½æ•°
- **ç¬¦å·é¢æ¿** - æŒ‰ç±»åˆ«ç»„ç»‡çš„é¡µé¢ç¬¦å·åˆ—è¡¨
- **é”®ç›˜å¯¼èˆª** - ä½¿ç”¨å¿«æ·é”®åœ¨æ ‡é¢˜é—´å¯¼èˆª

### ğŸ’¬ AI èŠå¤©åŠ©æ‰‹ AI Chat Assistant
- **é¡µé¢ç›¸å…³é—®ç­”** - åŸºäºå½“å‰æ–‡æ¡£å†…å®¹çš„æ™ºèƒ½é—®ç­”
- **æ–‡æœ¬æ£€ç´¢** - è‡ªåŠ¨ä»å½“å‰é¡µé¢æå–ç›¸å…³å†…å®¹
- **ç®€æ´ç•Œé¢** - ç±»ä¼¼ LLM çš„èŠå¤©ç•Œé¢

### ğŸ¨ ç”¨æˆ·ä½“éªŒæ”¹è¿› UX Improvements
- **ä¸“æ³¨æ¨¡å¼** - éšè—å¹²æ‰°å…ƒç´ ï¼Œä¸“æ³¨é˜…è¯»æ–‡æ¡£
- **ä»£ç å¤åˆ¶æŒ‰é’®** - ä¸€é”®å¤åˆ¶ä»£ç å—
- **æ ‡é¢˜æ·±é“¾æ¥** - ç‚¹å‡»å¤åˆ¶æ ‡é¢˜é“¾æ¥ï¼Œé«˜äº®æ˜¾ç¤º
- **æ»šåŠ¨ä½ç½®è®°å¿†** - åˆ·æ–°é¡µé¢åæ¢å¤æ»šåŠ¨ä½ç½®
- **å“åº”å¼è®¾è®¡** - é€‚é…å„ç§å±å¹•å°ºå¯¸
- **ç¦»çº¿ç¼“å­˜** - Service Worker è‡ªåŠ¨ç¼“å­˜é¡µé¢ä¸é™æ€èµ„æºï¼Œæ–­ç½‘æ—¶ä¹Ÿèƒ½å›çœ‹

### ğŸ”§ å¼€å‘è€…å‹å¥½ Developer Friendly
- **å¹‚ç­‰æ“ä½œ** - å¯å®‰å…¨å¤šæ¬¡è¿è¡Œï¼Œè‡ªåŠ¨æ£€æµ‹å·²æ³¨å…¥å†…å®¹
- **è½»æ¾æ’¤é”€** - ä½¿ç”¨ `--revert` å‚æ•°ç§»é™¤æ‰€æœ‰æ³¨å…¥çš„å¢å¼ºåŠŸèƒ½
- **ç¦»çº¿å·¥ä½œ** - æ— éœ€ç½‘ç»œè¿æ¥ï¼Œæ‰€æœ‰åŠŸèƒ½æœ¬åœ°è¿è¡Œ
- **æœ€å°ä¾èµ–** - ä¸»è¦ä½¿ç”¨ Rust æ ‡å‡†åº“ï¼Œæ„å»ºå¿«é€Ÿå¯é 

## ğŸš€ å¿«é€Ÿå¼€å§‹ Quick Start

### å®‰è£… Installation

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/your-username/cargo-doc-viewer.git
cd cargo-doc-viewer

# æ„å»ºå‘å¸ƒç‰ˆæœ¬
cargo build --release

# å¯é€‰ï¼šå®‰è£…åˆ°ç³»ç»Ÿè·¯å¾„
cargo install --path .
```

### åŸºæœ¬ä½¿ç”¨ Basic Usage

1. **ç”Ÿæˆæ–‡æ¡£** Generate documentation:
   ```bash
   cargo doc
   ```

2. **å¯åŠ¨è¿è¡Œæ—¶æœåŠ¡** Start the runtime server (é»˜è®¤è¡Œä¸º Default):
   ```bash
   cargo-doc-viewer
   # è‡ªå®šä¹‰ç›‘å¬åœ°å€å’Œç«¯å£
   cargo-doc-viewer serve --addr 127.0.0.1:4200
   ```
   æµè§ˆå™¨æ‰“å¼€ `http://127.0.0.1:7878/` å³å¯æŸ¥çœ‹å¢å¼ºåçš„æ–‡æ¡£ï¼›æ‰€æœ‰ HTML åœ¨å“åº”é˜¶æ®µæ³¨å…¥ï¼Œæ— éœ€å†™å›ç£ç›˜ã€‚
   é»˜è®¤åœ¨å·¥ç¨‹æ ¹ç›®å½•è¿è¡Œæ—¶ï¼Œå¦‚æœå°šæœªç”Ÿæˆæ–‡æ¡£ï¼Œå·¥å…·ä¼šè‡ªåŠ¨æ‰§è¡Œ `cargo doc` å¹¶åœ¨å®Œæˆåå¯åŠ¨æœåŠ¡ã€‚\
   When invoked from the project root without an explicit `--doc-dir`, the tool now runs `cargo doc` automatically before serving when no documentation is present.

3. **å¯é€‰ï¼šé™æ€æ³¨å…¥** Optional static enhance:
   ```bash
   cargo-doc-viewer enhance --doc-dir target/doc
   ```
   è¯¥æ¨¡å¼ä¼šç›´æ¥ä¿®æ”¹ HTML æ–‡ä»¶ï¼Œå¹¶ç”Ÿæˆ `cdv-crate-overview.html` ä¾¿äºç¦»çº¿æµè§ˆã€‚

4. **æ’¤é”€å¢å¼º** Revert enhancements:
   ```bash
   cargo-doc-viewer revert --doc-dir target/doc
   ```

### å‘½ä»¤è¡Œé€‰é¡¹ Command Line Options

```
cargo-doc-viewer [serve] [-d|--doc-dir <path>] [--addr <ip:port>] [--port <port>]
cargo-doc-viewer enhance [-d|--doc-dir <path>]
cargo-doc-viewer revert [-d|--doc-dir <path>]

OPTIONS:
    -d, --doc-dir <path>    æŒ‡å®šæ–‡æ¡£ç›®å½• (é»˜è®¤: target/doc)
    --addr <ip:port>        è¿è¡Œæ—¶æ¨¡å¼ç›‘å¬åœ°å€ (é»˜è®¤: 127.0.0.1:7878)
    --port <port>           å¿«é€ŸæŒ‡å®šç«¯å£ï¼Œç­‰ä»·äº --addr 127.0.0.1:<port>
    -h, --help              æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯

EXAMPLES:
    cargo doc && cargo-doc-viewer          # å¯åŠ¨æœ¬åœ°æœåŠ¡
    cargo-doc-viewer serve --port 4200     # æŒ‡å®šç«¯å£
    cargo-doc-viewer enhance --doc-dir target/doc
    cargo-doc-viewer revert --doc-dir target/doc
```

## ğŸ› ï¸ å·¥ä½œåŸç† How It Works

é»˜è®¤çš„ **serve æ¨¡å¼** é€šè¿‡æœ¬åœ° HTTP æœåŠ¡åœ¨â€œå“åº”é˜¶æ®µâ€æ³¨å…¥å¢å¼ºç»„ä»¶ï¼š

1. **è¯·æ±‚æ‹¦æˆª** - æ•è·å¯¹ `.html` æ–‡ä»¶çš„è®¿é—®ï¼Œå¯¹é™æ€èµ„æºç›´æ¥é€ä¼ 
2. **è¿è¡Œæ—¶æ³¨å…¥** - åœ¨è¿”å›å†…å®¹å‰æ’å…¥ CSS/JSï¼Œä¸å¯¹ç£ç›˜æ–‡ä»¶åšä»»ä½•ä¿®æ”¹
3. **æ¦‚è§ˆé¡µé¢** - `/cdv-crate-overview.html` åŠ¨æ€æ‰«æ `doc` ç›®å½•å¹¶å®æ—¶æ¸²æŸ“
4. **å¯é€‰é™æ€æ¨¡å¼** - `enhance` å­å‘½ä»¤ä»å¯å°±åœ°æ”¹å†™ HTMLï¼Œå¹¶å†™å…¥æ ‡è®°ä¾¿äº `revert`
5. **Service Worker** - é¦–æ¬¡è®¿é—®åè‡ªåŠ¨æ³¨å†Œï¼Œç¼“å­˜ HTML ä¸é™æ€èµ„æºä»¥æ”¯æŒç¦»çº¿æµè§ˆ

### æ¶æ„ç‰¹ç‚¹ Architecture Features

- âœ… **éä¾µå…¥å¼** - é»˜è®¤è¿è¡Œæ—¶æ³¨å…¥ï¼Œå¯éšæ—¶é‡æ–°ç”Ÿæˆæ–‡æ¡£æ— éœ€äºŒæ¬¡å¤„ç†
- âœ… **è™šæ‹Ÿæ¦‚è§ˆ** - æ¦‚è§ˆé¡µé¢æŒ‰éœ€ç”Ÿæˆï¼Œæ— éœ€å†™å…¥é¢å¤–æ–‡ä»¶
- âœ… **è€æ¨¡å¼å…¼å®¹** - é™æ€å¢å¼ºä¸æ’¤é”€æµç¨‹ä¿æŒå¯ç”¨ï¼Œæ–¹ä¾¿ç¦»çº¿åˆ†äº«
- âœ… **è‡ªåŒ…å«èµ„äº§** - CSS/JS å­˜æ”¾åœ¨ `src/assets/`ï¼Œç¼–è¯‘æ—¶åµŒå…¥äºŒè¿›åˆ¶

## ğŸ¯ ä½¿ç”¨åœºæ™¯ Use Cases

### æ—¥å¸¸å¼€å‘ Daily Development
```bash
# å¼€å‘å·¥ä½œæµ
cargo doc && cargo-doc-viewer
open target/doc/my_crate/index.html
```

### æ–‡æ¡£å®¡æŸ¥ Documentation Review
```bash
# ä¸ºå›¢é˜Ÿå®¡æŸ¥å¢å¼ºæ–‡æ¡£ä½“éªŒ
cargo doc --document-private-items
cargo-doc-viewer --doc-dir target/doc
```

### æ¼”ç¤ºå’Œæ•™å­¦ Presentations & Teaching
```bash
# ä¸ºæ¼”ç¤ºæˆ–æ•™å­¦å‡†å¤‡å¢å¼ºçš„æ–‡æ¡£
cargo doc --examples
cargo-doc-viewer
# ä½¿ç”¨ä¸“æ³¨æ¨¡å¼è¿›è¡Œæ¼”ç¤º
```

## ğŸ”§ è‡ªå®šä¹‰å’Œæ‰©å±• Customization & Extension

### URL å‚æ•° URL Parameters

åœ¨æ–‡æ¡£ URL ä¸­æ·»åŠ å‚æ•°æ¥æ§åˆ¶åŠŸèƒ½ï¼š

- `?cdv-notop` - ç¦ç”¨é¡¶éƒ¨æœç´¢æ 
- `?cdv-nochat` - ç¦ç”¨ AI èŠå¤©åŠŸèƒ½
- `?cdv-nosym` - ç¦ç”¨ç¬¦å·é¢æ¿

ç¤ºä¾‹ï¼š`target/doc/my_crate/index.html?cdv-notop&cdv-nochat`

### æœ¬åœ°å­˜å‚¨ Local Storage

å·¥å…·ä½¿ç”¨ localStorage ä¿å­˜ç”¨æˆ·åå¥½ï¼š

- æœç´¢å†å²å’Œç­›é€‰è®¾ç½®
- ä¸“æ³¨æ¨¡å¼çŠ¶æ€
- æ»šåŠ¨ä½ç½®è®°å¿†

é”®åæŒ‰æ–‡æ¡£æ ¹è·¯å¾„å’ŒåŒ…åä½œç”¨åŸŸåŒºåˆ†ã€‚

## ğŸ¤ è´¡çŒ® Contributing

æˆ‘ä»¬æ¬¢è¿å„ç§å½¢å¼çš„è´¡çŒ®ï¼

### å¼€å‘ç¯å¢ƒè®¾ç½® Development Setup

```bash
git clone https://github.com/your-username/cargo-doc-viewer.git
cd cargo-doc-viewer

# è¿è¡Œæ£€æŸ¥
cargo check

# æµ‹è¯•ä¿®æ”¹
cargo doc  # ç”Ÿæˆæµ‹è¯•æ–‡æ¡£
cargo run --  # é»˜è®¤å¯åŠ¨ serve æ¨¡å¼
# æµè§ˆå™¨è®¿é—® http://127.0.0.1:7878 æŸ¥çœ‹æ•ˆæœ

# æµ‹è¯•æ’¤é”€åŠŸèƒ½
cargo run -- revert
```

### ä¿®æ”¹ UI ç»„ä»¶ Modifying UI Components

- **æ ·å¼ä¿®æ”¹** - ç¼–è¾‘ `src/assets/cdv.css`
- **åŠŸèƒ½ä¿®æ”¹** - ç¼–è¾‘ `src/assets/cdv.js`
- **æ³¨å…¥é€»è¾‘** - åœ¨ `src/injector.rs` ä¸­è°ƒæ•´ Rust ä¾§çš„ HTML å¤„ç†
- **è¿è¡Œæ—¶æœåŠ¡** - ä¿®æ”¹ `src/server.rs` è‡ªå®šä¹‰è·¯ç”±æˆ–ç¼“å­˜ç­–ç•¥

### æäº¤æŒ‡å— Contribution Guidelines

1. Fork ä»“åº“å¹¶åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
2. ç¡®ä¿ä»£ç é€šè¿‡ `cargo check` å’Œ `cargo clippy`
3. æµ‹è¯•å¢å¼ºå’Œæ’¤é”€åŠŸèƒ½éƒ½èƒ½æ­£å¸¸å·¥ä½œ
4. æäº¤ PR å¹¶æè¿°ä½ çš„æ›´æ”¹

## ğŸ“„ è®¸å¯è¯ License

æœ¬é¡¹ç›®é‡‡ç”¨ MIT æˆ– Apache-2.0 åŒé‡è®¸å¯è¯ã€‚

This project is licensed under either of:
- Apache License, Version 2.0 ([LICENSE-APACHE](LICENSE-APACHE))
- MIT License ([LICENSE-MIT](LICENSE-MIT))

## ğŸ™ è‡´è°¢ Acknowledgments

- æ„Ÿè°¢ Rust å›¢é˜Ÿæä¾›å‡ºè‰²çš„ rustdoc å·¥å…·
- æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…å’Œç”¨æˆ·çš„åé¦ˆ

---

**å¦‚æœè¿™ä¸ªå·¥å…·å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª â­ï¸ æ”¯æŒä¸€ä¸‹ï¼**

**If this tool helps you, please give it a â­ï¸!**
